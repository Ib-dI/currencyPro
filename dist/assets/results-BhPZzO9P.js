import"./style-ceMUldZf.js";const w=document.getElementById("base-name"),h=document.getElementById("target-name"),d=document.getElementById("result"),y=document.getElementById("base-result"),E=document.getElementById("base-icon"),k=document.querySelectorAll(".base-description"),I=document.getElementById("target-icon"),b=document.querySelectorAll(".target-description"),B=document.getElementById("swap-button"),L=document.getElementById("base-link"),x=document.getElementById("target-link"),u=new URL(document.location);let n=u.searchParams.get("base"),a=u.searchParams.get("target");const C=document.getElementById("refresh-btn"),D=document.getElementById("last-updated-time");let r;function c(){if(!r)return;const t=Math.floor((new Date-r)/6e4);D.innerText=`Last updated ${t} minute${t>1?"s":""} ago`}function g(){c(),setInterval(c,6e4)}async function l(){if(n&&a)try{const e=s(n),t=s(a),i=await U(n,a);y.innerHTML=`1.00 ${e.description}=`,d.innerHTML=`${i} ${t.description}`,r=new Date,c(),g()}catch{d.innerHTML="Error fetching exchange rate."}else d.innerHTML="Invalid parameters."}async function $(){l(),r=new Date,c(),g()}C.addEventListener("click",$);B.addEventListener("click",()=>{[n,a]=[a,n],m(),l()});async function v(){m(),await l()}v();function m(){const e=s(n),t=s(a);w.textContent=`${n}- `,h.textContent=`${a}- `,E.src=e.icon,k.forEach(i=>i.textContent=`${e.description}`),I.src=t.icon,b.forEach(i=>i.textContent=t.description),L.href=e.wikipedia,x.href=t.wikipedia}function s(e){return{USD:{icon:"/img/flags/flag-united-states.png",description:"US Dollar",wikipedia:"https://en.wikipedia.org/wiki/United_States_dollar"},EUR:{icon:"/img/flags/flag-european-union.png",description:"Euro",wikipedia:"https://en.wikipedia.org/wiki/Euro"},CAD:{icon:"/img/flags/flag-canada.png",description:"Canadian Dollar",wikipedia:"https://en.wikipedia.org/wiki/Canadian_dollar"}}[e]||{icon:"img/flags/default.png",description:"Unknown Currency",wikipedia:"https://en.wikipedia.org/wiki/Currency"}}async function U(e,t){const f=`https://v6.exchangerate-api.com/v6/39d41333dc932cc45f07b10a/pair/${e}/${t}`;try{const o=await fetch(f);if(!o.ok)throw new Error("La réponse du réseau n'était pas correcte");const p=await o.json();if(p.conversion_rate)return p.conversion_rate;throw new Error("Le taux de conversion n'est pas disponible")}catch(o){throw console.error("Il y a eu un problème avec l'opération fetch:",o),o}}
